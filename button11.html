<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë³µí•œì•„ë¦„ ê¸°ë¡ê³µì±…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }
    body { margin: 0; padding: 10px; background: #f5f5f5; }
    .app {
      max-width: 900px; margin: 0 auto; background: #ffffff; border-radius: 12px;
      padding: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    }
    h1 { margin: 0 0 8px; font-size: 18px; display:flex; justify-content:space-between; }
    .badge { font-size:12px; border:1px solid #ddd; border-radius:999px; padding:4px 10px; background:#fafafa; }

    button { cursor: pointer; border-radius: 8px; border: 1px solid #ddd; background: #fff; padding: 6px 10px; font-size: 13px; }
    button:active { transform: scale(0.97); }

    .layout { display: flex; gap: 10px; }
    @media (max-width: 720px) { .layout { flex-direction: column; } }
    .left, .right { flex: 1; }

    .panel-title { font-size: 14px; font-weight: 600; }

    /* ===== ë²„íŠ¼ ëª©ë¡ ===== */
    .panel-header-row {
      display:flex; justify-content:space-between; align-items:center; gap:8px;
    }
    .buttons-area { margin: 6px 0 10px; max-height: 55vh; overflow-y: auto; }
    .btn-row { display:flex; gap:4px; margin-bottom:6px; }
    .btn-main {
      flex:1; padding:10px; border-radius:10px;
      border:1px solid #ccc; background:#fafafa; text-align:left;
    }
    .btn-controls button { font-size:11px; padding:4px 6px; }

    .add-current {
      width:100%; background:#eef7ff; border-color:#b3d4ff; margin-bottom:8px;
    }

    /* ===== í‘œ & ì•ˆë‚´ë¬¸ ê³µí†µ í­ ===== */
    .left-box {
      border:1px dashed #ddd;
      border-radius:10px;
      padding:10px;
      background:#fbfbfb;
      margin-bottom:10px;
    }

    /* ===== ì—‘ì…€í˜• í‘œ ===== */
    .todo-table {
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:2px;
      margin-top:6px;
    }
    .todo-cell { border:1px solid #ccc; background:#fff; }
    .todo-cell.header {
      background:#eef7ff;
      font-weight:700;
      text-align:center;
      padding:6px;
      font-size:12px;
    }
    .todo-cell input {
      width:100%;
      height:34px;
      border:none;
      outline:none;
      text-align:center;
      font-size:12px;
      background:transparent;
    }
    .todo-cell input:focus { background:#f0f8ff; }

    /* ===== í´ë¦­ ê¸°ë¡ ===== */
    .log-box {
      border:1px solid #ddd; border-radius:10px;
      padding:8px; background:#fafafa;
      max-height:65vh; overflow-y:auto;
    }
    #logList { list-style:none; padding:0; margin:0; font-size:12px; }
    #logList li { display:flex; gap:4px; border-bottom:1px solid #eee; padding:4px 2px; }
    .log-text { flex:1; }

    .help-edit-btn { margin-top:6px; width:100%; font-size:12px; }

  </style>
</head>
<body>
<div class="app">
  <h1>
    ë³µí•œì•„ë¦„ ê¸°ë¡ê³µì±…
    <span class="badge">ë¡œì»¬ ëª¨ë“œ</span>
  </h1>

  <div class="layout">
    <!-- ===== LEFT ===== -->
    <div class="left">

      <!-- ğŸ”½ í‘œê°€ ë¨¼ì € -->
      <div class="left-box">
        <div class="panel-title">í•  ì¼ / ì™„ë£Œí•œ ì¼</div>
        <div class="todo-table" id="todoTable"></div>
      </div>

      <!-- ğŸ”½ ì•ˆë‚´ë¬¸ì€ ì•„ë˜ -->
      <div class="left-box">
        <div id="helpText" style="font-size:12px; opacity:.75;"></div>
        <button class="help-edit-btn" id="btnEditHelp">âœï¸ ì•ˆë‚´ë¬¸ ìˆ˜ì •</button>
      </div>

      <!-- ë²„íŠ¼ ëª©ë¡ -->
      <div class="panel-header-row">
        <div class="panel-title">ë²„íŠ¼ ëª©ë¡</div>
        <div>
          <button id="btnUp">â—€ ìƒìœ„</button>
          <button id="btnRoot">â¬† ìµœìƒìœ„</button>
        </div>
      </div>

      <div class="buttons-area" id="buttonContainer"></div>
      <button class="add-current" id="btnAddHere">+ ì´ ìœ„ì¹˜ì— ìƒˆ ë²„íŠ¼ ì¶”ê°€</button>
    </div>

    <!-- ===== RIGHT ===== -->
    <div class="right">
      <div class="panel-title">í´ë¦­ ê¸°ë¡ (<span id="logCount">0</span>)</div>
      <div class="log-box">
        <ul id="logList"></ul>
      </div>
    </div>
  </div>
</div>

<script>
/* ===== í•  ì¼ / ì™„ë£Œí•œ ì¼ í‘œ ===== */
const TODO_KEY = "todoTable_v3";
let todo = Array.from({length:10},()=>["",""]);

function loadTodo(){
  const s = localStorage.getItem(TODO_KEY);
  if(s) try{ todo = JSON.parse(s);}catch{}
}
function saveTodo(){ localStorage.setItem(TODO_KEY, JSON.stringify(todo)); }

function focusCell(r,c){
  const el = document.querySelector(`input[data-r="${r}"][data-c="${c}"]`);
  if(el){ el.focus(); }
}

function renderTodo(){
  const t = document.getElementById("todoTable");
  t.innerHTML = "";
  ["í•  ì¼","ì™„ë£Œí•œ ì¼"].forEach(h=>{
    const d=document.createElement("div");
    d.className="todo-cell header";
    d.textContent=h;
    t.appendChild(d);
  });
  todo.forEach((row,r)=>{
    row.forEach((v,c)=>{
      const d=document.createElement("div");
      d.className="todo-cell";
      const i=document.createElement("input");
      i.value=v; i.dataset.r=r; i.dataset.c=c;
      i.oninput=()=>{ todo[r][c]=i.value; saveTodo(); };
      i.onkeydown=(e)=>{
        if(e.key==="Enter"){ e.preventDefault(); focusCell(Math.min(9,r+1),c); }
        if(e.key==="ArrowUp"){ e.preventDefault(); focusCell(Math.max(0,r-1),c); }
        if(e.key==="ArrowDown"){ e.preventDefault(); focusCell(Math.min(9,r+1),c); }
        if(e.key==="ArrowLeft"){ e.preventDefault(); focusCell(r,Math.max(0,c-1)); }
        if(e.key==="ArrowRight"){ e.preventDefault(); focusCell(r,Math.min(1,c+1)); }
      };
      d.appendChild(i); t.appendChild(d);
    });
  });
}

/* ===== ì•ˆë‚´ë¬¸ ===== */
const HELP_KEY="helpText_v1";
let help="ğŸ’¡ í•˜ìœ„ ë²„íŠ¼ì´ ì—†ëŠ” ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì˜¤ë¥¸ìª½ì— ê¸°ë¡ë©ë‹ˆë‹¤.";
function loadHelp(){ help=localStorage.getItem(HELP_KEY)||help; }
function saveHelp(){ localStorage.setItem(HELP_KEY,help); }
document.getElementById("btnEditHelp").onclick=()=>{
  const t=prompt("ì•ˆë‚´ë¬¸ ìˆ˜ì •",help);
  if(t){ help=t; saveHelp(); renderHelp(); }
};
function renderHelp(){ document.getElementById("helpText").textContent=help; }

/* ===== ì´ˆê¸°í™” ===== */
loadTodo(); loadHelp();
renderTodo(); renderHelp();
</script>
</body>
</html>
